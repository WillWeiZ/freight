# 📥 CSV数据下载功能说明

## 新增功能概览

我们为主应用添加了专门的"📥 数据下载"标签页，提供完整的CSV数据下载服务。

## 📊 可下载的数据类型

### 核心数据文件

#### 1. 📋 原始打卡匹配数据
- **文件名**: `2025-08-20_打卡_已匹配.csv`
- **内容**: 176条司机GPS打卡记录 + 分公司匹配信息
- **用途**: 原始数据备份、进一步分析
- **字段**: 订单号、司机ID、时间、经纬度、送货地址、匹配分公司等

#### 2. 💰 司机成本分析数据
- **文件名**: `司机成本分析_YYYYMMDD_HHMMSS.csv`
- **内容**: 17个司机的详细成本分析结果
- **用途**: 财务报告、绩效评估
- **字段**: 总距离、配送时长、里程成本、时间成本、固定成本、总成本等

#### 3. 🏢 分公司汇总统计
- **文件名**: `分公司汇总_YYYYMMDD_HHMMSS.csv`
- **内容**: 6个分公司的效率和成本对比
- **用途**: 管理决策、效率分析
- **字段**: 司机数量、总里程、平均成本、成本效率等

### 分析报告文件

#### 4. ⚙️ 成本参数配置
- **文件名**: `成本参数配置_YYYYMMDD_HHMMSS.json`
- **内容**: 当前使用的成本计算参数
- **用途**: 重现分析结果、参数审计
- **格式**: JSON格式，包含燃油价格、时薪、折旧等参数

#### 5. 📋 综合分析报告
- **文件名**: `综合分析报告_YYYYMMDD_HHMMSS.csv`
- **内容**: 包含所有关键指标和分析结论
- **用途**: 管理汇报、决策支持
- **包含**: 整体统计、成本结构、效率排名、绩效分析、参数配置

#### 6. 🔄 参数对比分析 (条件下载)
- **文件名**: `参数对比分析_YYYYMMDD_HHMMSS.csv`
- **内容**: 参数调整前后的成本变化分析
- **用途**: 敏感性分析、决策评估
- **条件**: 仅在调整成本参数时可用

## 🎯 使用方法

### 1. 访问下载页面
1. 打开应用：http://localhost:8501
2. 点击"📥 数据下载"标签页

### 2. 下载操作
- **左列**: 核心数据文件下载
- **右列**: 分析报告下载
- **点击按钮**: 直接下载对应CSV文件

### 3. 文件管理
- 所有文件名包含时间戳，避免覆盖
- CSV文件使用UTF-8编码，支持中文
- JSON文件格式化输出，便于阅读

## 📈 数据概览

### 实时统计指标
- **数据日期**: 2025-08-20
- **总记录数**: 176条打卡记录
- **司机数量**: 17人
- **分公司数**: 6个

### 文件大小预估
- 原始数据: ~100KB
- 成本分析: ~5KB
- 分公司汇总: ~1KB
- 综合报告: ~3KB
- 参数配置: ~500B

## 💡 使用建议

### 按用途分类下载

**日常管理**:
- 下载"司机成本分析数据"用于日常财务管理
- 下载"分公司汇总统计"用于效率监控

**深度分析**:
- 下载"原始打卡匹配数据"用于自定义分析
- 下载"综合分析报告"用于全面了解

**参数调优**:
- 调整参数后下载"参数对比分析"
- 下载"成本参数配置"记录最优参数

**数据备份**:
- 定期下载所有数据文件进行备份
- 保存参数配置用于结果重现

### 数据处理建议

**Excel处理**:
- CSV文件可直接在Excel中打开
- 注意选择UTF-8编码保持中文正确显示

**进一步分析**:
- 可导入Python/R进行高级分析
- 结合其他数据源进行综合分析

**报告制作**:
- 综合分析报告可直接用于PPT制作
- 分公司汇总适合制作对比图表

## 🔧 技术特性

- **实时生成**: 数据随参数调整实时更新
- **格式标准**: 标准CSV格式，兼容各种工具
- **编码正确**: UTF-8-sig编码，确保中文显示
- **时间戳**: 文件名含时间戳，避免覆盖
- **容错处理**: 数据加载失败时显示错误信息

## 📝 注意事项

1. **网络稳定性**: 确保下载过程中网络稳定
2. **浏览器兼容**: 建议使用Chrome/Edge/Firefox
3. **文件权限**: 确保下载目录有写入权限
4. **数据时效**: 下载数据为当前参数计算结果
5. **文件大小**: 原始数据文件较大，下载需时间

---

**访问地址**: http://localhost:8501 → 📥 数据下载
**支持格式**: CSV、JSON
**更新频率**: 实时生成